define(["./Transforms-8bc971ce","./Cartesian2-74eb73ca","./Check-d18af7c4","./when-208fe5b0","./Math-4e53b694","./ArcType-dc1c5aee","./arrayRemoveDuplicates-0f62a181","./ComponentDatatype-9204e9f6","./EllipsoidGeodesic-cdcd09f8","./EllipsoidRhumbLine-64ee3955","./EncodedCartesian3-8b06738b","./GeometryAttribute-9fc79195","./IntersectionTests-b7c42792","./Plane-0f109f34","./WebMercatorProjection-b43bc554","./RuntimeError-7f634f5d","./WebGLConstants-76bb35d1"],function(Ie,Oe,e,H,be,B,G,Pe,_,j,Le,ke,Y,r,a,t,i){"use strict";function n(e){e=H.defaultValue(e,H.defaultValue.EMPTY_OBJECT),H.defined(e.tileInfo)&&H.defined(e.tileInfo.spatialReference)&&H.defined(e.tileInfo.spatialReference.wkid)&&4490==e.tileInfo.spatialReference.wkid?(this._tileInfo=e.tileInfo,this._ellipsoid=H.defaultValue(e.ellipsoid,Oe.Ellipsoid.CGCS2000),this._rectangle=H.defaultValue(e.rectangle,Oe.Rectangle.fromDegrees(-180,-90,180,90)),this._numberOfLevelZeroTilesX=H.defaultValue(e.numberOfLevelZeroTilesX,4),this._numberOfLevelZeroTilesY=H.defaultValue(e.numberOfLevelZeroTilesY,2)):(this._ellipsoid=H.defaultValue(e.ellipsoid,Oe.Ellipsoid.WGS84),this._rectangle=H.defaultValue(e.rectangle,Oe.Rectangle.MAX_VALUE),this._numberOfLevelZeroTilesX=H.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=H.defaultValue(e.numberOfLevelZeroTilesY,1)),this._projection=new Ie.GeographicProjection(this._ellipsoid)}Object.defineProperties(n.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),n.prototype.getNumberOfXTilesAtLevel=function(a){if(H.defined(this._tileInfo)){var e=this._tileInfo.lods.filter(function(e){return e.level===a})[0].resolution;return Math.round(be.CesiumMath.toDegrees(be.CesiumMath.TWO_PI)/(this._tileInfo.rows*e))}return this._numberOfLevelZeroTilesX<<a},n.prototype.getNumberOfYTilesAtLevel=function(a){if(H.defined(this._tileInfo)){var e=this._tileInfo.lods.filter(function(e){return e.level===a})[0].resolution;return Math.round(be.CesiumMath.toDegrees(be.CesiumMath.TWO_PI/2)/(this._tileInfo.cols*e))}return this._numberOfLevelZeroTilesY<<a},n.prototype.rectangleToNativeRectangle=function(e,a){var t=be.CesiumMath.toDegrees(e.west),i=be.CesiumMath.toDegrees(e.south),n=be.CesiumMath.toDegrees(e.east),e=be.CesiumMath.toDegrees(e.north);return H.defined(a)?(a.west=t,a.south=i,a.east=n,a.north=e,a):new Oe.Rectangle(t,i,n,e)},n.prototype.tileXYToNativeRectangle=function(e,a,t,i){i=this.tileXYToRectangle(e,a,t,i);return i.west=be.CesiumMath.toDegrees(i.west),i.south=be.CesiumMath.toDegrees(i.south),i.east=be.CesiumMath.toDegrees(i.east),i.north=be.CesiumMath.toDegrees(i.north),i},n.prototype.tileXYToRectangle=function(e,a,t,i){var n,r,s=this._rectangle,o=0,l=0,u=0,c=0;return c=H.defined(this._tileInfo)?(r=this._tileInfo.lods.filter(function(e){return e.level===t})[0].resolution,u=this._tileInfo.origin.y-a*(this._tileInfo.cols*r),o=this._tileInfo.origin.x+e*(this._tileInfo.rows*r),c=this._tileInfo.origin.y-(a+1)*(this._tileInfo.cols*r),l=this._tileInfo.origin.x+(e+1)*(this._tileInfo.rows*r),o=be.CesiumMath.toRadians(o),u=be.CesiumMath.toRadians(u),l=be.CesiumMath.toRadians(l),be.CesiumMath.toRadians(c)):(n=this.getNumberOfXTilesAtLevel(t),r=this.getNumberOfYTilesAtLevel(t),o=e*(n=s.width/n)+s.west,l=(e+1)*n+s.west,r=s.height/r,u=s.north-a*r,s.north-(a+1)*r),(i=!H.defined(i)?new Oe.Rectangle(o,c,l,u):i).west=o,i.south=c,i.east=l,i.north=u,i},n.prototype.positionToTileXY=function(e,a,t){var i=this._rectangle;if(Oe.Rectangle.contains(i,e)){if(H.defined(this._tileInfo)){var n=this._tileInfo.lods.filter(function(e){return e.level===a})[0].resolution,r=be.CesiumMath.toDegrees(e.longitude),s=be.CesiumMath.toDegrees(e.latitude),o=Math.floor((r-this._tileInfo.origin.x)/(this._tileInfo.rows*n)),l=Math.floor((this._tileInfo.origin.y-s)/(this._tileInfo.cols*n));return new Oe.Cartesian2(o,l)}r=this.getNumberOfXTilesAtLevel(a),s=this.getNumberOfYTilesAtLevel(a),n=i.width/r,o=i.height/s,l=e.longitude;i.east<i.west&&(l+=be.CesiumMath.TWO_PI);n=(l-i.west)/n|0;r<=n&&(n=r-1);o=(i.north-e.latitude)/o|0;return(s<=o&&(o=s-1),H.defined(t))?(t.x=n,t.y=o,t):new Oe.Cartesian2(n,o)}};var s=new Oe.Cartesian3,o=new Oe.Cartesian3,l=new Oe.Cartographic,u=new Oe.Cartesian3,c=new Oe.Cartesian3,C=new Ie.BoundingSphere,h=new n,d=[new Oe.Cartographic,new Oe.Cartographic,new Oe.Cartographic,new Oe.Cartographic],p=new Oe.Cartesian2,Ae={};function f(e){Oe.Cartographic.fromRadians(e.east,e.north,0,d[0]),Oe.Cartographic.fromRadians(e.west,e.north,0,d[1]),Oe.Cartographic.fromRadians(e.east,e.south,0,d[2]),Oe.Cartographic.fromRadians(e.west,e.south,0,d[3]);for(var a=0,t=0,i=0,n=0,r=Ae._terrainHeightsMaxLevel,s=0;s<=r;++s){for(var o=!1,l=0;l<4;++l)if(h.positionToTileXY(d[l],s,p),0===l)i=p.x,n=p.y;else if(i!==p.x||n!==p.y){o=!0;break}if(o)break;a=i,t=n}if(0!==s)return{x:a,y:t,level:r<s?r:s-1}}Ae.initialize=function(){var e=Ae._initPromise;return H.defined(e)?e:(e=Ie.Resource.fetchJson(Ie.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){Ae._terrainHeights=e}),Ae._initPromise=e)},Ae.getMinimumMaximumHeights=function(e,a){a=H.defaultValue(a,Oe.Ellipsoid.WGS84);var t=f(e),i=Ae._defaultMinTerrainHeight,n=Ae._defaultMaxTerrainHeight;return H.defined(t)&&(t=t.level+"-"+t.x+"-"+t.y,t=Ae._terrainHeights[t],H.defined(t)&&(i=t[0],n=t[1]),a.cartographicToCartesian(Oe.Rectangle.northeast(e,l),s),a.cartographicToCartesian(Oe.Rectangle.southwest(e,l),o),Oe.Cartesian3.midpoint(o,s,u),a=a.scaleToGeodeticSurface(u,c),i=H.defined(a)?(a=Oe.Cartesian3.distance(u,a),Math.min(i,-a)):Ae._defaultMinTerrainHeight),{minimumTerrainHeight:i=Math.max(Ae._defaultMinTerrainHeight,i),maximumTerrainHeight:n}},Ae.getBoundingSphere=function(e,a){a=H.defaultValue(a,Oe.Ellipsoid.WGS84);var t=f(e),i=Ae._defaultMaxTerrainHeight;H.defined(t)&&(n=t.level+"-"+t.x+"-"+t.y,n=Ae._terrainHeights[n],H.defined(n)&&(i=n[1]));var n=Ie.BoundingSphere.fromRectangle3D(e,a,0);return Ie.BoundingSphere.fromRectangle3D(e,a,i,C),Ie.BoundingSphere.union(n,C,n)},Ae._terrainHeightsMaxLevel=6,Ae._defaultMaxTerrainHeight=9e3,Ae._defaultMinTerrainHeight=-1e5,Ae._terrainHeights=void 0,Ae._initPromise=void 0,Object.defineProperties(Ae,{initialized:{get:function(){return H.defined(Ae._terrainHeights)}}});var X=[Ie.GeographicProjection,a.WebMercatorProjection],g=X.length,Se=Math.cos(be.CesiumMath.toRadians(30)),m=Math.cos(be.CesiumMath.toRadians(150)),F=0,W=1e3;function w(e){var a=(e=H.defaultValue(e,H.defaultValue.EMPTY_OBJECT)).positions;this.width=H.defaultValue(e.width,1),this._positions=a,this.granularity=H.defaultValue(e.granularity,9999),this.loop=H.defaultValue(e.loop,!1),this.arcType=H.defaultValue(e.arcType,B.ArcType.GEODESIC),this._ellipsoid=Oe.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(w.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+Oe.Ellipsoid.packedLength+1+1}}}),w.setProjectionAndEllipsoid=function(e,a){for(var t=0,i=0;i<g;i++)if(a instanceof X[i]){t=i;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var v=new Oe.Cartesian3,y=new Oe.Cartesian3,M=new Oe.Cartesian3;function q(e,a,t,i,n){var r=U(i,e,0,v),t=U(i,e,t,y),a=U(i,a,0,M),t=Re(t,r,y),r=Re(a,r,M);return Oe.Cartesian3.cross(r,t,n),Oe.Cartesian3.normalize(n,n)}var T=new Oe.Cartographic,E=new Oe.Cartesian3,I=new Oe.Cartesian3,O=new Oe.Cartesian3;function Z(e,a,t,i,n,r,s,o,l,u,c){if(0!==n){var C;r===B.ArcType.GEODESIC?C=new _.EllipsoidGeodesic(e,a,s):r===B.ArcType.RHUMB&&(C=new j.EllipsoidRhumbLine(e,a,s));r=C.surfaceDistance;if(!(r<n))for(var h=q(e,a,i,s,O),n=Math.ceil(r/n),d=r/n,p=d,f=n-1,g=o.length,m=0;m<f;m++){var w=C.interpolateUsingSurfaceDistance(p,T),v=U(s,w,t,E),y=U(s,w,i,I);Oe.Cartesian3.pack(h,o,g),Oe.Cartesian3.pack(v,l,g),Oe.Cartesian3.pack(y,u,g),c.push(w.latitude),c.push(w.longitude),g+=3,p+=d}}}var b=new Oe.Cartographic;function U(e,a,t,i){return Oe.Cartographic.clone(a,b),b.height=t,Oe.Cartographic.toCartesian(b,e,i)}function Re(e,a,t){return Oe.Cartesian3.subtract(e,a,t),Oe.Cartesian3.normalize(t,t),t}function P(e,a,t,i){return i=Re(e,a,i),i=Oe.Cartesian3.cross(i,t,i),i=Oe.Cartesian3.normalize(i,i),i=Oe.Cartesian3.cross(t,i,i)}w.pack=function(e,a,t){var i=H.defaultValue(t,0),n=e._positions,r=n.length;a[i++]=r;for(var s=0;s<r;++s){var o=n[s];Oe.Cartesian3.pack(o,a,i),i+=3}return a[i++]=e.granularity,a[i++]=e.loop?1:0,a[i++]=e.arcType,Oe.Ellipsoid.pack(e._ellipsoid,a,i),i+=Oe.Ellipsoid.packedLength,a[i++]=e._projectionIndex,a[i++]=e._scene3DOnly?1:0,a},w.unpack=function(e,a,t){for(var i=H.defaultValue(a,0),n=e[i++],r=new Array(n),s=0;s<n;s++)r[s]=Oe.Cartesian3.unpack(e,i),i+=3;var o=e[i++],l=1===e[i++],u=e[i++],c=Oe.Ellipsoid.unpack(e,i);i+=Oe.Ellipsoid.packedLength;var C=e[i++],a=1===e[i++];return(t=!H.defined(t)?new w({positions:r}):t)._positions=r,t.granularity=o,t.loop=l,t.arcType=u,t._ellipsoid=c,t._projectionIndex=C,t._scene3DOnly=a,t};var L=new Oe.Cartesian3,k=new Oe.Cartesian3,A=new Oe.Cartesian3,S=new Oe.Cartesian3;function J(e,a,t,i,n){t=Re(t,a,S),e=P(e,a,t,L),a=P(i,a,t,k);if(be.CesiumMath.equalsEpsilon(Oe.Cartesian3.dot(e,a),-1,be.CesiumMath.EPSILON5))return n=Oe.Cartesian3.cross(t,e,n),n=Oe.Cartesian3.normalize(n,n);n=Oe.Cartesian3.add(a,e,n),n=Oe.Cartesian3.normalize(n,n);t=Oe.Cartesian3.cross(t,n,A);return n=Oe.Cartesian3.dot(a,t)<0?Oe.Cartesian3.negate(n,n):n}var Q=r.Plane.fromPointNormal(Oe.Cartesian3.ZERO,Oe.Cartesian3.UNIT_Y),K=new Oe.Cartesian3,$=new Oe.Cartesian3,ee=new Oe.Cartesian3,ae=new Oe.Cartesian3,te=new Oe.Cartesian3,ie=new Oe.Cartesian3,ne=new Oe.Cartographic,re=new Oe.Cartographic,se=new Oe.Cartographic;w.createGeometry=function(e){var a,t,i,n,r,s=!e._scene3DOnly,o=e.loop,l=e._ellipsoid,u=e.granularity,c=e.arcType,C=new X[e._projectionIndex](l),h=F,d=W,p=e._positions,f=p.length;2===f&&(o=!1);for(var g,m,w,v=new j.EllipsoidRhumbLine(void 0,void 0,l),y=[p[0]],_=0;_<f-1;_++)t=p[_],i=p[_+1],g=Y.IntersectionTests.lineSegmentPlane(t,i,Q,ie),!H.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||(e.arcType===B.ArcType.GEODESIC?y.push(Oe.Cartesian3.clone(g)):e.arcType===B.ArcType.RHUMB&&(w=l.cartesianToCartographic(g,ne).longitude,n=l.cartesianToCartographic(t,ne),r=l.cartesianToCartographic(i,re),v.setEndPoints(n,r),m=v.findIntersectionWithLongitude(w,se),g=l.cartographicToCartesian(m,ie),!H.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||y.push(Oe.Cartesian3.clone(g)))),y.push(i);o&&(t=p[f-1],i=p[0],g=Y.IntersectionTests.lineSegmentPlane(t,i,Q,ie),!H.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||(e.arcType===B.ArcType.GEODESIC?y.push(Oe.Cartesian3.clone(g)):e.arcType===B.ArcType.RHUMB&&(w=l.cartesianToCartographic(g,ne).longitude,n=l.cartesianToCartographic(t,ne),r=l.cartesianToCartographic(i,re),v.setEndPoints(n,r),m=v.findIntersectionWithLongitude(w,se),g=l.cartographicToCartesian(m,ie),!H.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||y.push(Oe.Cartesian3.clone(g)))));var M=y.length,T=new Array(M);for(_=0;_<M;_++){var E=Oe.Cartographic.fromCartesian(y[_],l);E.height=0,T[_]=E}if(!((M=(T=G.arrayRemoveDuplicates(T,Oe.Cartographic.equalsEpsilon)).length)<2)){var I=[],O=[],b=[],P=[],L=$,k=ee,A=ae,S=te,R=T[0],x=T[1];for(D=U(l,T[M-1],h,D=K),A=U(l,x,h,A),L=U(l,R,h,L),k=U(l,R,d,k),S=o?J(D,L,k,A,S):q(R,x,d,l,S),Oe.Cartesian3.pack(S,O,0),Oe.Cartesian3.pack(L,b,0),Oe.Cartesian3.pack(k,P,0),I.push(R.latitude),I.push(R.longitude),Z(R,x,h,d,u,c,l,O,b,P,I),_=1;_<M-1;++_){var D=Oe.Cartesian3.clone(L,D),L=Oe.Cartesian3.clone(A,L),N=T[_];U(l,N,d,k),U(l,T[_+1],h,A),J(D,L,k,A,S),a=O.length,Oe.Cartesian3.pack(S,O,a),Oe.Cartesian3.pack(L,b,a),Oe.Cartesian3.pack(k,P,a),I.push(N.latitude),I.push(N.longitude),Z(T[_],T[_+1],h,d,u,c,l,O,b,P,I)}var z=T[M-1],V=T[M-2];if(L=U(l,z,h,L),k=U(l,z,d,k),S=o?(x=T[0],J(D=U(l,V,h,D),L,k,A=U(l,x,h,A),S)):q(V,z,d,l,S),a=O.length,Oe.Cartesian3.pack(S,O,a),Oe.Cartesian3.pack(L,b,a),Oe.Cartesian3.pack(k,P,a),I.push(z.latitude),I.push(z.longitude),o){for(Z(z,R,h,d,u,c,l,O,b,P,I),a=O.length,_=0;_<3;++_)O[a+_]=O[_],b[a+_]=b[_],P[a+_]=P[_];I.push(R.latitude),I.push(R.longitude)}return function(e,a,t,i,n,r,s){var o,l,u,c,C,h,d=a._ellipsoid,p=t.length/3-1,f=8*p,g=4*f,m=36*p,w=new(65535<f?Uint32Array:Uint16Array)(m),v=new Float64Array(3*f),y=new Float32Array(g),_=new Float32Array(g),M=new Float32Array(g),T=new Float32Array(g),E=new Float32Array(g);s&&(u=new Float32Array(g),c=new Float32Array(g),C=new Float32Array(g),h=new Float32Array(2*f));var I=r.length/2,O=0,b=Ve;b.height=0;var P=He;P.height=0;var L=Be,k=Ge;if(s)for(l=0,o=1;o<I;o++)b.latitude=r[l],b.longitude=r[l+1],P.latitude=r[l+2],P.longitude=r[l+3],L=a.project(b,L),k=a.project(P,k),O+=Oe.Cartesian3.distance(L,k),l+=2;var A=i.length/3;k=Oe.Cartesian3.unpack(i,0,k);var S,R=0;for(l=3,o=1;o<A;o++)L=Oe.Cartesian3.clone(k,L),k=Oe.Cartesian3.unpack(i,l,k),R+=Oe.Cartesian3.distance(L,k),l+=3;l=3;var x=0,D=0,N=0,z=0,V=!1,H=Oe.Cartesian3.unpack(t,0,Ye),B=Oe.Cartesian3.unpack(i,0,Ge),G=Oe.Cartesian3.unpack(n,0,Fe);e&&(Ee=Oe.Cartesian3.unpack(t,t.length-6,je),xe(G,Ee,H,B)&&(G=Oe.Cartesian3.negate(G,G)));var j,Y,X,F,W,q,Z,U=0,J=0,Q=0;for(o=0;o<p;o++){var K=Oe.Cartesian3.clone(H,je),$=Oe.Cartesian3.clone(B,Be),ee=Oe.Cartesian3.clone(G,Xe);V&&(ee=Oe.Cartesian3.negate(ee,ee)),H=Oe.Cartesian3.unpack(t,l,Ye),B=Oe.Cartesian3.unpack(i,l,Ge),G=Oe.Cartesian3.unpack(n,l,Fe),V=xe(G,K,H,B),b.latitude=r[x],b.longitude=r[x+1],P.latitude=r[x+2],P.longitude=r[x+3],s&&(_e=function(e,a){var t=Math.abs(e.longitude),i=Math.abs(a.longitude);{if(be.CesiumMath.equalsEpsilon(t,be.CesiumMath.PI,be.CesiumMath.EPSILON11)){var n=be.CesiumMath.sign(a.longitude);return e.longitude=n*(t-be.CesiumMath.EPSILON11),1}if(be.CesiumMath.equalsEpsilon(i,be.CesiumMath.PI,be.CesiumMath.EPSILON11)){e=be.CesiumMath.sign(e.longitude);return a.longitude=e*(i-be.CesiumMath.EPSILON11),2}}return 0}(b,P),j=a.project(b,Ke),(he=Re(Y=a.project(P,$e),j,ca)).y=Math.abs(he.y),X=ea,F=aa,0===_e||Oe.Cartesian3.dot(he,Oe.Cartesian3.UNIT_Y)>Se?(X=De(a,b,ee,j,ea),F=De(a,P,G,Y,aa)):1===_e?(F=De(a,P,G,Y,aa),X.x=0,X.y=be.CesiumMath.sign(b.longitude-Math.abs(P.longitude)),X.z=0):(X=De(a,b,ee,j,ea),F.x=0,F.y=be.CesiumMath.sign(b.longitude-P.longitude),F.z=0));var ae=Oe.Cartesian3.distance($,B),te=Le.EncodedCartesian3.fromCartesian(K,la),ie=Oe.Cartesian3.subtract(H,K,ta),ne=Oe.Cartesian3.normalize(ie,ra),re=Oe.Cartesian3.subtract($,K,ia);re=Oe.Cartesian3.normalize(re,re);var se=Oe.Cartesian3.cross(ne,re,ra);se=Oe.Cartesian3.normalize(se,se);var oe=Oe.Cartesian3.cross(re,ee,sa);oe=Oe.Cartesian3.normalize(oe,oe);var le=Oe.Cartesian3.subtract(B,H,na);le=Oe.Cartesian3.normalize(le,le);var ue=Oe.Cartesian3.cross(G,le,oa);ue=Oe.Cartesian3.normalize(ue,ue);var ce=ae/R,Ce=U/R,he=0,de=0,pe=0;for(s&&(he=Oe.Cartesian3.distance(j,Y),W=Le.EncodedCartesian3.fromCartesian(j,ua),q=Oe.Cartesian3.subtract(Y,j,ca),Me=(Z=Oe.Cartesian3.normalize(q,Ca)).x,Z.x=Z.y,Z.y=-Me,de=he/O,pe=J/O),S=0;S<8;S++){var fe=z+4*S,ge=D+2*S,me=fe+3,we=S<4?1:-1,ve=2===S||3===S||6===S||7===S?1:-1;Oe.Cartesian3.pack(te.high,y,fe),y[me]=ie.x,Oe.Cartesian3.pack(te.low,_,fe),_[me]=ie.y,Oe.Cartesian3.pack(oe,M,fe),M[me]=ie.z,Oe.Cartesian3.pack(ue,T,fe),T[me]=ce*we,Oe.Cartesian3.pack(se,E,fe);var ye=Ce*ve;0===ye&&ve<0&&(ye=9),E[me]=ye,s&&(u[fe]=W.high.x,u[fe+1]=W.high.y,u[fe+2]=W.low.x,u[fe+3]=W.low.y,C[fe]=-X.y,C[fe+1]=X.x,C[fe+2]=F.y,C[fe+3]=-F.x,c[fe]=q.x,c[fe+1]=q.y,c[fe+2]=Z.x,c[fe+3]=Z.y,h[ge]=de*we,0===(ye=pe*ve)&&ve<0&&(ye=9),h[ge+1]=ye)}var _e=Je,ne=Qe,re=Ze,ee=Ue,le=Oe.Rectangle.fromCartographicArray(We,qe),Me=Ae.getMinimumMaximumHeights(le,d),le=Me.minimumTerrainHeight,Me=Me.maximumTerrainHeight;Q+=le,Q+=Me,Ne(K,$,le,Me,_e,re),Ne(H,B,le,Me,ne,ee);Me=Oe.Cartesian3.multiplyByScalar(se,be.CesiumMath.EPSILON5,ha);Oe.Cartesian3.add(_e,Me,_e),Oe.Cartesian3.add(ne,Me,ne),Oe.Cartesian3.add(re,Me,re),Oe.Cartesian3.add(ee,Me,ee),ze(_e,ne),ze(re,ee),Oe.Cartesian3.pack(_e,v,N),Oe.Cartesian3.pack(ne,v,N+3),Oe.Cartesian3.pack(ee,v,N+6),Oe.Cartesian3.pack(re,v,N+9),Me=Oe.Cartesian3.multiplyByScalar(se,-2*be.CesiumMath.EPSILON5,ha),Oe.Cartesian3.add(_e,Me,_e),Oe.Cartesian3.add(ne,Me,ne),Oe.Cartesian3.add(re,Me,re),Oe.Cartesian3.add(ee,Me,ee),ze(_e,ne),ze(re,ee),Oe.Cartesian3.pack(_e,v,N+12),Oe.Cartesian3.pack(ne,v,N+15),Oe.Cartesian3.pack(ee,v,N+18),Oe.Cartesian3.pack(re,v,N+21),x+=2,l+=3,D+=16,N+=24,z+=32,U+=ae,J+=he}var Te=l=0;for(o=0;o<p;o++){for(S=0;S<fa;S++)w[l+S]=pa[S]+Te;Te+=8,l+=fa}e=da;Ie.BoundingSphere.fromVertices(t,Oe.Cartesian3.ZERO,3,e[0]),Ie.BoundingSphere.fromVertices(i,Oe.Cartesian3.ZERO,3,e[1]);var Ee=Ie.BoundingSphere.fromBoundingSpheres(e);Ee.radius+=Q/(2*p);e={position:new ke.GeometryAttribute({componentDatatype:Pe.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:v}),startHiAndForwardOffsetX:ga(y),startLoAndForwardOffsetY:ga(_),startNormalAndForwardOffsetZ:ga(M),endNormalAndTextureCoordinateNormalizationX:ga(T),rightNormalAndTextureCoordinateNormalizationY:ga(E)};s&&(e.startHiLo2D=ga(u),e.offsetAndRight2D=ga(c),e.startEndNormals2D=ga(C),e.texcoordNormalization2D=new ke.GeometryAttribute({componentDatatype:Pe.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:h}));return new ke.Geometry({attributes:e,indices:w,boundingSphere:Ee})}(o,C,b,P,O,I,s)}};var R=new Oe.Cartesian3,x=new Ie.Matrix3,D=new Ie.Quaternion;function xe(e,a,t,i){a=Re(t,a,R),a=Oe.Cartesian3.dot(a,e);if(Se<a||a<m){t=Re(i,t,S),a=a<m?be.CesiumMath.PI_OVER_TWO:-be.CesiumMath.PI_OVER_TWO,a=Ie.Quaternion.fromAxisAngle(t,a,D),a=Ie.Matrix3.fromQuaternion(a,x);return Ie.Matrix3.multiplyByVector(a,e,e),!0}return!1}var N=new Oe.Cartographic,z=new Oe.Cartesian3,V=new Oe.Cartesian3;function De(e,a,t,i,n){var r=Oe.Cartographic.toCartesian(a,e._ellipsoid,z),s=Oe.Cartesian3.add(r,t,V),o=!1,l=e._ellipsoid,u=l.cartesianToCartographic(s,N);Math.abs(a.longitude-u.longitude)>be.CesiumMath.PI_OVER_TWO&&(o=!0,s=Oe.Cartesian3.subtract(r,t,V),u=l.cartesianToCartographic(s,N)),u.height=0;u=e.project(u,n);return(n=Oe.Cartesian3.subtract(u,i,n)).z=0,n=Oe.Cartesian3.normalize(n,n),o&&Oe.Cartesian3.negate(n,n),n}var oe=new Oe.Cartesian3,le=new Oe.Cartesian3;function Ne(e,a,t,i,n,r){var s=Oe.Cartesian3.subtract(a,e,oe);Oe.Cartesian3.normalize(s,s);t=Oe.Cartesian3.multiplyByScalar(s,t-F,le);Oe.Cartesian3.add(e,t,n);t=Oe.Cartesian3.multiplyByScalar(s,i-W,le);Oe.Cartesian3.add(a,t,r)}var ue=new Oe.Cartesian3;function ze(e,a){var t=r.Plane.getPointDistance(Q,e),i=r.Plane.getPointDistance(Q,a),n=ue;be.CesiumMath.equalsEpsilon(t,0,be.CesiumMath.EPSILON2)?(n=Re(a,e,n),Oe.Cartesian3.multiplyByScalar(n,be.CesiumMath.EPSILON2,n),Oe.Cartesian3.add(e,n,e)):be.CesiumMath.equalsEpsilon(i,0,be.CesiumMath.EPSILON2)&&(n=Re(e,a,n),Oe.Cartesian3.multiplyByScalar(n,be.CesiumMath.EPSILON2,n),Oe.Cartesian3.add(a,n,a))}var Ve=new Oe.Cartographic,He=new Oe.Cartographic,Be=new Oe.Cartesian3,Ge=new Oe.Cartesian3,je=new Oe.Cartesian3,Ye=new Oe.Cartesian3,Xe=new Oe.Cartesian3,Fe=new Oe.Cartesian3,We=[Ve,He],qe=new Oe.Rectangle,Ze=new Oe.Cartesian3,Ue=new Oe.Cartesian3,Je=new Oe.Cartesian3,Qe=new Oe.Cartesian3,Ke=new Oe.Cartesian3,$e=new Oe.Cartesian3,ea=new Oe.Cartesian3,aa=new Oe.Cartesian3,ta=new Oe.Cartesian3,ia=new Oe.Cartesian3,na=new Oe.Cartesian3,ra=new Oe.Cartesian3,sa=new Oe.Cartesian3,oa=new Oe.Cartesian3,la=new Le.EncodedCartesian3,ua=new Le.EncodedCartesian3,ca=new Oe.Cartesian3,Ca=new Oe.Cartesian3,ha=new Oe.Cartesian3,da=[new Ie.BoundingSphere,new Ie.BoundingSphere],pa=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],fa=pa.length;function ga(e){return new ke.GeometryAttribute({componentDatatype:Pe.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return w._projectNormal=De,function(e,a){return Ae.initialize().then(function(){return H.defined(a)&&(e=w.unpack(e,a)),w.createGeometry(e)})}});
